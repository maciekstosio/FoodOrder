<!-- Navbar -->
<nav class="uk-navbar-container uk-margin" uk-navbar>
  <div class="uk-navbar-left">
    <ul class="uk-navbar-nav">
      <li><a ng-click="logout()"><span uk-icon="icon: sign-out"></a></li>
    </ul>
  </div>
  <div class="uk-navbar-center">
    <span class="uk-navbar-item uk-logo">FoodOrder</span>
  </div>
  <div class="uk-navbar-right">
    <span class="uk-navbar-item">{{name ? name : nickname}} <img class="uk-border-circle" ng-src="{{image}}" alt="Avatar"></span>
  </div>
</nav>

<!-- Content -->
<div class="uk-flex-center" uk-grid>
  <div class="uk-width-2-3">
    <section id="lists">
      <div class="top">
        <button class="uk-button uk-button-default" type="button" uk-toggle="target: #addlist">New list</button>
      </div>

      <div class="uk-tile uk-tile-muted uk-padding-small uk-margin" ng-repeat="list in lists">
          <p class="uk-margin-remove">
            <span class="uk-text-large">{{list.name}}</span>
            <span class="uk-label uk-label-warning" style="font-size: 10px; margin-top: -16px;">In progress...</span>
            <a uk-toggle="target: #more{{list.id}}; animation: uk-animation-slide-top-small" uk-icon="icon: chevron-down"></a>
          </p>
          <div id="more{{list.id}}" hidden="hidden">

          <div class="uk-grid-small" ng-repeat="order in orders" ng-if="order.list_id==list.id"uk-grid>
            <div class="uk-width-expand" uk-leader>{{order.name}}</div>
            <div>{{order.price}}zł</div>
          </div>

          <div class="uk-grid-small" ng-show="orderform[list.id].$dirty" uk-grid>
            <div class="uk-width-expand" uk-leader>{{neworder[list.id].name}}</div>
            <div>{{neworder[list.id].price}}zł</div>
          </div>

          <!-- Add form -->
          <ng-form name="orderform[list.id]" ng-init="initNewOrder(list.id)" ng-if="ordered.indexOf(list.id) < 0" uk-grid>
            <div class="uk-width-3-5">
                <label class="uk-form-label" for="name">Meal</label>
                <div class="uk-form-controls">
                    <input type="text" name="name" class="uk-input" id="name" ng-model="neworder[list.id].name" placeholder="Meal" required>
                </div>
            </div>

            <div class="uk-width-1-5">
                <label class="uk-form-label" for="link">Price</label>
                <div class="uk-form-controls">
                    <input type="number" name="price" class="uk-input" id="link" ng-model="neworder[list.id].price" placeholder="Price" required>
                </div>
            </div>

            <div class="uk-width-1-5">
              <button type="button" class="uk-button uk-button-primary uk-width-1-1" ng-click="addOrder(list.id,neworder[list.id].name,neworder[list.id].price)" style="margin-top: 24px;">Add</button>
            </div>
          </ng-form>
        </div>
      </div>
    </section>

    <h3 class="uk-heading-line uk-text-center"><span>Archive</span></h3>
  </div>
</div>

<!-- footer -->
<footer class="uk-margin uk-text-center uk-text-small">2017 &copy; FoodOrder</footer>

<!-- Modals -->
<div id="addlist" uk-modal>
  <div class="uk-modal-dialog uk-modal-body">
    <form class="uk-form-stacked">
      <h2 class="uk-modal-title">Create new order list</h2>

      <div class="uk-margin">
          <label class="uk-form-label" for="name">Name of restaurant</label>
          <div class="uk-form-controls">
              <input type="text" class="uk-input" id="name" ng-model="newlist.name" placeholder="PizzaHut">
          </div>
      </div>

      <div class="uk-margin">
          <label class="uk-form-label" for="link">Link to menu (optional)</label>
          <div class="uk-form-controls">
              <input type="url" class="uk-input" id="link" ng-model="newlist.link" placeholder="http://">
          </div>
      </div>

      <p class="uk-text-right">
          <button type="button" class="uk-button uk-button-default uk-modal-close">Cancel</button>
          <button type="button" class="uk-button uk-button-primary uk-modal-close" ng-click="addList()">Create</button>
      </p>
    </form>
  </div>
</div>
